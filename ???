-- Load WindUI
local WindUI = loadstring(game:HttpGet("https://github.com/Footagesus/WindUI/releases/latest/download/main.lua"))()

-- Ambil nama player
local player = game.Players.LocalPlayer
local playerName = player.Name
local playerDisplayName = player.DisplayName

-- Buat Window versi baru
local Window = WindUI:CreateWindow({
    Title = "Nexa - ???",
    Icon = "rbxassetid://107488593993096",
    Author = "Fish IT! Script | @ Han",
    Folder = "Hanzo",
    Size = UDim2.fromOffset(540, 420),
    Transparent = true,
    Theme = "Dark",
    
    HidePanelBackground = true,
    NewElements = false,

    User = {
        Enabled = true,
        Anonymous = false,           -- false biar muncul nama asli
        Name = playerDisplayName,    -- Nama tampilan
        UserName = "@" .. playerName, -- Username Roblox
        Callback = function()
            WindUI:Notify({
                Title = "User Profile",
                Content = "User profile clicked!",
                Duration = 3
            })
        end
    },
    
    Acrylic = false,
    HideSearchBar = false,
    SideBarWidth = 200,
})

Window:Tag({
    Title = "v1.1.8",
    Color = Color3.fromHex("#30ff6a")
})


Window:EditOpenButton({
    Enabled = false
})

WindUI:Notify({
    Title = "Game Supported",
    Content = "Dig ðŸ”´, 99 Nights in the Forest ðŸ”´, Fish It ðŸŸ¢, Grow A Garden ðŸ”´",
    Icon = "gamepad",
    Duration = 6
})

task.delay(6.5, function()
    WindUI:Notify({
        Title = "Bug Report",
        Content = "If there are any errors, please let the developer know. Join Discord to report bugs.",
        Icon = "cloud-alert",
        Duration = 6
    })
end)

task.delay(13, function()
    WindUI:Notify({
        Title = "Purchase",
        Content = "If you want to buy this premium script key, join Discord to buy premium.",
        Icon = "shopping-cart",
        Duration = 6
    })
end)

-- âœ… Tab dan UI
local Tabs = {
    Home = Window:Tab({ Title = "Home", Icon = "house"  }),
    Active = Window:Tab({ Title = "Active", Icon = "info"  }),
    Farm = Window:Tab({ Title = "Farm", Icon = "fish"  }),
    Shop = Window:Tab({ Title = "Shop", Icon = "shopping-cart"  })
}

Tabs.Shop:Section({ Title = "Rod" })

local purchase = game:GetService("ReplicatedStorage"):WaitForChild("events"):WaitForChild("purchase")

-- === List Semua Rod ===
local availableRods = {
   "Flimsy Rod","Training Rod","Plastic Rod","Carbon Rod","Fast Rod","Lucky Rod","Long Rod","Stone Rod","Steady Rod","Fortune Rod","Rapid Rod","Magnet Rod",
   "Nocturnal Rod","Precision Rod","Wildflower Rod","Reinforced Rod","Arctic Rod","Avalanche Rod","Phoenix Rod","Scurvy Rod","Midas Rod","Crystalized Rod","Depthseeker Rod","Aurora Rod","Mythical Rod",
   "Kings Rod","Ice Warpers Rod","Brick Rod","Champions Rod","Carrot Rod","Wisdom Rod","Trident Rod","Summit Rod","Resourceful Rod","Volcanic Rod","Voyager Rod","Riptide Rod","Seasons Rod","Rainbow Cluster Rod",
   "Great Dreamer Rod","Destiny Rod","The Lost Rod","Frostbane Rod","Scarlet Spincaster Rod","Heaven's Rod","Zeus Rod","Tempest Rod","Kraken Rod","Poseidon Rod","Leviathan's Fang Rod","Challenger's Rod","Great Rod of Oscar",
   "Luminescent Oath","Celestial Rod","Rod Of The Eternal King","Rod Of The Forgotten Fang","Evil Pitchfork","Cerulean Fang Rod","Wicked Fang Rod","Ethereal Prism Rod","Rod Of The Zenith","Spiritbinder","Ruinous Oath","Tryhard Rod"
}

-- === Variabel Pilihan User ===
local chosenRods = {}

-- === Dropdown: pilih rods (multi) ===
Tabs.Shop:Dropdown({
    Title = "Select Rods",
    Values = availableRods,
    SearchBarEnabled = true,
    Value = {},
    Multi = true,
    AllowNone = true,
    Callback = function(option)
        chosenRods = option or {}
    end
})

-- === Button: beli rods yang dipilih ===
Tabs.Shop:Button({
    Title = "Buy Selected Rods",
    Callback = function()
        if not chosenRods or #chosenRods == 0 then
            WindUI:Notify({
                Title = "Warning",
                Content = "No rods selected. Choose at least one rod first.",
                Duration = 4,
            })
            return
        end

        local category = "Rod"
        local qty = 1
        local delayBetween = 0.5

        for _, rodName in ipairs(chosenRods) do
            local args = { rodName, category }
            args[4] = qty

            pcall(function()
                purchase:FireServer(unpack(args))
            end)

            task.wait(delayBetween)
        end

        WindUI:Notify({
            Title = "Purchase",
            Content = "Purchase completed for selected rods.",
            Duration = 4,
        })
    end
})

