local WindUI = loadstring(game:HttpGet("https://raw.githubusercontent.com/Footagesus/WindUI/main/dist/main.lua"))()

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local merchant = LocalPlayer.PlayerGui.Merchant.Main.Background.Items.ScrollingFrame

-- Fungsi buat pasang listener ke tiap ItemName
local function monitorItemName(itemLabel)
	if not itemLabel then return end
	local oldText = itemLabel.Text

	itemLabel:GetPropertyChangedSignal("Text"):Connect(function()
		if itemLabel.Text ~= oldText then
			oldText = itemLabel.Text
			WindUI:Notify({
				Title = "Nexa Notify Merchant",
				Content = "ItemName berubah menjadi: " .. itemLabel.Text,
				Duration = 5,
			})
		end
	end)
end

-- Ambil semua ItemName Text saat pertama kali
local allNames = {}
for _, child in ipairs(merchant:GetChildren()) do
	if child:FindFirstChild("Frame") and child.Frame:FindFirstChild("ItemName") then
		table.insert(allNames, child.Frame.ItemName.Text)
		monitorItemName(child.Frame.ItemName)
	end
end

-- Gabungkan dan tampilkan di notif awal
if #allNames > 0 then
	local combined = table.concat(allNames, " | ")
	WindUI:Notify({
		Title = "Nexa Notify Merchant",
		Content = "Stock Merchant: " .. combined,
		Duration = 8,
	})
end

-- Pantau jika Template baru muncul (misal setelah refresh)
merchant.ChildAdded:Connect(function(child)
	task.wait(0.5)
	if child:FindFirstChild("Frame") and child.Frame:FindFirstChild("ItemName") then
		monitorItemName(child.Frame.ItemName)
	end
end)
